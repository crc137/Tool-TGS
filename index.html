<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Å–º–æ—Ç—Ä TGS —Ñ–∞–π–ª–æ–≤</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js"></script>
    <style>* {margin: 0;padding: 0;box-sizing: border-box;}body {font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;background: #0a0a0a;min-height: 100vh;padding: 20px;}.container {max-width: 1200px;margin: 0 auto;}h1 {color: #ffffff;text-align: center;margin-bottom: 30px;text-shadow: 0 2px 10px rgba(255,255,255,0.1);letter-spacing: -0.5px;}.upload-area {background: #1a1a1a;border-radius: 16px;padding: 60px 40px;text-align: center;margin-bottom: 30px;border: 2px dashed #4a4a4a;transition: all 0.3s ease;cursor: pointer;position: relative;overflow: hidden;}.upload-area::before {content: '';position: absolute;top: 0;left: -100%;width: 100%;height: 100%;background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);transition: left 0.5s;}.upload-area:hover::before {left: 100%;}.upload-area:hover {background: #222222;border-color: #6a6a6a;transform: translateY(-2px);}.upload-area.drag-over {background: #2a2a2a;border-color: #ffffff;border-width: 3px;transform: scale(1.02);}.upload-area input[type="file"] {display: none;}.upload-icon {font-size: 64px;margin-bottom: 20px;display: block;opacity: 0.6;transition: all 0.3s;}.upload-area:hover .upload-icon {opacity: 1;transform: translateY(-5px);}.upload-text {font-size: 20px;font-weight: 500;color: #e0e0e0;margin-bottom: 10px;letter-spacing: -0.3px;}.upload-subtext {font-size: 14px;color: #8a8a8a;margin-bottom: 30px;font-weight: 400;}.upload-divider {display: flex;align-items: center;justify-content: center;margin: 25px 0;gap: 15px;}.upload-divider::before, .upload-divider::after {content: '';flex: 1;height: 1px;background: #3a3a3a;}.upload-divider-text {color: #6a6a6a;font-size: 12px;text-transform: uppercase;letter-spacing: 1px;font-weight: 600;}.upload-button {padding: 14px 32px;background: #ffffff;color: #000000;border: 2px solid #ffffff;border-radius: 8px;font-size: 15px;font-weight: 600;cursor: pointer;transition: all 0.2s;display: inline-block;letter-spacing: -0.2px;}.upload-button:hover {background: transparent;color: #ffffff;transform: translateY(-2px);box-shadow: 0 4px 12px rgba(255,255,255,0.2);}.upload-button:active {transform: translateY(0);}.file-list {display: grid;grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));gap: 20px;margin-bottom: 30px;}.file-item {background: #1a1a1a;border-radius: 12px;padding: 15px;cursor: pointer;transition: transform 0.2s, box-shadow 0.2s, background 0.2s;box-shadow: 0 2px 8px rgba(0,0,0,0.4);border: 1px solid #2a2a2a;}.file-item:hover {transform: translateY(-5px);box-shadow: 0 8px 20px rgba(255,255,255,0.1);background: #242424;border-color: #4a4a4a;}.file-name {font-weight: 600;color: #e0e0e0;margin-bottom: 10px;word-break: break-word;}.preview-container {width: 100%;height: 200px;display: flex;align-items: center;justify-content: center;background: #0a0a0a;border-radius: 8px;margin-bottom: 10px;border: 1px solid #2a2a2a;}.lottie-preview {width: 150px;height: 150px;}.viewer {background: #1a1a1a;border-radius: 12px;padding: 30px;box-shadow: 0 8px 30px rgba(0,0,0,0.6);text-align: center;border: 1px solid #2a2a2a;}.viewer h2 {color: #e0e0e0;margin-bottom: 20px;font-weight: 600;}.viewer-container {width: 100%;max-width: 500px;height: 500px;margin: 0 auto;background: #0a0a0a;border-radius: 8px;display: flex;align-items: center;justify-content: center;border: 1px solid #2a2a2a;}.lottie-viewer {width: 400px;height: 400px;}.controls {margin-top: 20px;display: flex;gap: 10px;justify-content: center;flex-wrap: wrap;}button {padding: 10px 20px;border: 1px solid #4a4a4a;border-radius: 6px;background: #000000;color: white;font-weight: 600;cursor: pointer;transition: all 0.2s;}button:hover {background: #ffffff;color: #000000;border-color: #ffffff;}button:active {transform: scale(0.98);}.hidden {display: none;}.loading {color: #8a8a8a;font-style: italic;}.empty-state {text-align: center;color: #8a8a8a;padding: 40px;font-size: 18px;}</style>
</head>
<body>
    <div class="container">
        <h1>–ü—Ä–æ—Å–º–æ—Ç—Ä TGS —Ñ–∞–π–ª–æ–≤</h1>
        <div class="upload-area" id="uploadArea">
            <input type="file" id="fileInput" accept=".tgs" multiple>
            <span class="upload-icon">üìÅ</span>
            <div class="upload-text">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞</div>
            <div class="upload-subtext">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ .tgs</div>
            <div class="upload-divider">
                <span class="upload-divider-text">–∏–ª–∏</span>
            </div>
            <label for="fileInput" class="upload-button">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã</label>
        </div>
        <div id="fileList" class="file-list"></div>
        <div id="emptyState" class="empty-state hidden">–í—ã–±–µ—Ä–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ TGS —Ñ–∞–π–ª—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</div>
        <div id="viewer" class="viewer hidden">
            <h2 id="viewerTitle"></h2>
            <div class="viewer-container">
                <div id="lottieViewer" class="lottie-viewer"></div>
            </div>
            <div class="controls">
                <button onclick="goBack()">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</button>
                <button onclick="replayAnimation()">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å</button>
                <button id="playPauseBtn" onclick="togglePlayPause()">–ü–∞—É–∑–∞</button>
            </div>
        </div>
    </div>
    <script>let currentAnimation=null,isPlaying=!0,tgsFiles=new Map;function init(){let e=document.getElementById("fileInput"),t=document.getElementById("uploadArea");e.addEventListener("change",e=>{handleFiles(Array.from(e.target.files))}),t.addEventListener("dragover",e=>{e.preventDefault(),t.classList.add("drag-over")}),t.addEventListener("dragleave",()=>{t.classList.remove("drag-over")}),t.addEventListener("drop",e=>{e.preventDefault(),t.classList.remove("drag-over");let n=Array.from(e.dataTransfer.files).filter(e=>e.name.endsWith(".tgs"));handleFiles(n)})}function handleFiles(e){e.forEach(e=>{tgsFiles.set(e.name,e)}),renderFileList()}function renderFileList(){let e=document.getElementById("fileList"),t=document.getElementById("emptyState");if(e.innerHTML="",0===tgsFiles.size){t.classList.remove("hidden");return}t.classList.add("hidden"),tgsFiles.forEach((t,n)=>{let i=document.createElement("div");i.className="file-item",i.innerHTML=`<div class="file-name">${n}</div><div class="preview-container"><div class="lottie-preview" data-file="${n}"></div></div>`,i.onclick=()=>viewFile(n),e.appendChild(i),loadPreview(t)})}async function loadTGSFile(e){try{let t=await e.arrayBuffer(),n=new Uint8Array(t),i=pako.inflate(n),a=new TextDecoder("utf-8").decode(i),l=JSON.parse(a);return l}catch(r){throw console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ TGS —Ñ–∞–π–ª–∞:",r),r}}async function loadPreview(e){let t=document.querySelector(`[data-file="${e.name}"]`);if(t)try{let n=await loadTGSFile(e);lottie.loadAnimation({container:t,renderer:"svg",loop:!0,autoplay:!0,animationData:n})}catch(i){t.innerHTML='<div class="loading">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</div>'}}async function viewFile(e){let t=tgsFiles.get(e);if(!t)return;document.getElementById("fileList").style.display="none",document.getElementById("viewer").classList.remove("hidden"),document.getElementById("viewerTitle").textContent=e;let n=document.getElementById("lottieViewer");n.innerHTML="";try{let i=await loadTGSFile(t);currentAnimation&&currentAnimation.destroy(),currentAnimation=lottie.loadAnimation({container:n,renderer:"svg",loop:!0,autoplay:!0,animationData:i}),isPlaying=!0,document.getElementById("playPauseBtn").textContent="–ü–∞—É–∑–∞"}catch(a){n.innerHTML=`<div class="loading">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${a.message}</div>`}}function goBack(){currentAnimation&&(currentAnimation.destroy(),currentAnimation=null),document.getElementById("viewer").classList.add("hidden"),document.getElementById("fileList").style.display="grid"}function replayAnimation(){currentAnimation&&(currentAnimation.goToAndPlay(0,!0),isPlaying=!0,document.getElementById("playPauseBtn").textContent="–ü–∞—É–∑–∞")}function togglePlayPause(){let e=document.getElementById("playPauseBtn");currentAnimation&&(isPlaying?(currentAnimation.pause(),isPlaying=!1,e.textContent="–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏"):(currentAnimation.play(),isPlaying=!0,e.textContent="–ü–∞—É–∑–∞"))}init();</script>
</body>
</html>

